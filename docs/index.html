<!doctype html>
<html lang="pt">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="light dark" />
  <title>Materiais em PDF</title>

  <style>
    :root{
      --bg: #0b1020;
      --panel: rgba(255,255,255,.06);
      --panel2: rgba(255,255,255,.10);
      --text: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.68);
      --border: rgba(255,255,255,.14);
      --shadow: 0 20px 60px rgba(0,0,0,.45);
      --r: 18px;
      --rs: 14px;
      --max: 1020px;
      --accent: #8bd3ff;
    }
    @media (prefers-color-scheme: light){
      :root{
        --bg: #f6f7fb;
        --panel: rgba(0,0,0,.04);
        --panel2: rgba(0,0,0,.06);
        --text: rgba(0,0,0,.88);
        --muted: rgba(0,0,0,.60);
        --border: rgba(0,0,0,.10);
        --shadow: 0 18px 40px rgba(0,0,0,.12);
        --accent: #0066ff;
      }
    }
    *{ box-sizing: border-box; }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      color: var(--text);
      background:
        radial-gradient(1100px 600px at 12% -10%, rgba(139,211,255,.25), transparent 60%),
        radial-gradient(900px 600px at 92% 0%, rgba(184,247,212,.18), transparent 55%),
        var(--bg);
      line-height: 1.45;
    }
    a{ color: inherit; text-decoration: none; }
    a:hover{ text-decoration: underline; text-underline-offset: 3px; }

    .wrap{ max-width: var(--max); margin: 0 auto; padding: 34px 18px 56px; }

    header{
      display:flex; gap:18px; align-items:flex-start; justify-content: space-between;
      margin-bottom: 18px;
    }
    h1{ margin:0; font-size: clamp(26px, 3.2vw, 38px); letter-spacing:-0.02em; }
    .subtitle{ margin:8px 0 0; color: var(--muted); font-size: 15px; max-width: 70ch; }

    .badge{
      display:inline-flex; align-items:center; gap:8px;
      padding: 8px 12px; border-radius: 999px;
      border: 1px solid var(--border); background: var(--panel);
      color: var(--muted); font-size: 13px; user-select:none; white-space:nowrap;
    }

    .panel{
      border: 1px solid var(--border);
      background: var(--panel);
      border-radius: var(--r);
      box-shadow: var(--shadow);
    }

    .controls{ padding: 18px; display:grid; gap: 12px; }
    .row{ display:flex; gap: 12px; flex-wrap: wrap; align-items:center; justify-content: space-between; }

    .search{ flex: 1 1 420px; position: relative; }
    .search input{
      width:100%;
      padding: 12px 14px 12px 42px;
      border-radius: 14px;
      border: 1px solid var(--border);
      background: rgba(255,255,255,.06);
      color: var(--text);
      outline:none;
      font-size: 15px;
    }
    @media (prefers-color-scheme: light){
      .search input{ background: rgba(255,255,255,.65); }
    }
    .search input:focus{
      border-color: color-mix(in srgb, var(--accent) 55%, var(--border));
      box-shadow: 0 0 0 4px color-mix(in srgb, var(--accent) 18%, transparent);
    }
    .search svg{
      position:absolute; left: 13px; top: 50%;
      transform: translateY(-50%);
      opacity: .65;
    }

    .chips{ display:flex; gap: 8px; flex-wrap: wrap; }
    .chip{
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: transparent;
      color: var(--muted);
      font-size: 13px;
      cursor:pointer;
      user-select:none;
    }
    .chip[aria-pressed="true"]{
      background: var(--panel2);
      color: var(--text);
      border-color: color-mix(in srgb, var(--accent) 40%, var(--border));
    }

    .meta{ display:flex; gap: 10px; flex-wrap: wrap; justify-content: space-between; color: var(--muted); font-size: 13px; }
    .meta strong{ color: var(--text); font-weight: 600; }

    .section{ padding: 18px; }
    .section + .section{ padding-top: 0; }

    .sectionHead{
      display:flex; align-items: baseline; justify-content: space-between; gap: 12px;
      margin: 6px 0 12px;
    }
    .sectionTitle{
      margin:0;
      font-size: 16px;
      letter-spacing: -0.01em;
    }
    .sectionCount{ color: var(--muted); font-size: 13px; }

    .grid{
      display:grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 14px;
    }
    @media (max-width: 720px){ .grid{ grid-template-columns: 1fr; } }

    .card{
      border: 1px solid var(--border);
      background: rgba(255,255,255,.04);
      border-radius: var(--rs);
      padding: 16px;
      display:flex;
      flex-direction: column;
      gap: 10px;
      transition: transform .12s ease, filter .12s ease, background .12s ease;
    }
    @media (prefers-color-scheme: light){
      .card{ background: rgba(255,255,255,.72); }
    }
    .card:hover{ transform: translateY(-2px); }
    .docTitle{ margin:0; font-size: 16px; }
    .docDesc{ margin:0; color: var(--muted); font-size: 13px; }

    .actions{ display:flex; gap: 10px; flex-wrap: wrap; }
    .btnLink{
      display:inline-flex; align-items:center; gap: 8px;
      padding: 9px 10px;
      border-radius: 12px;
      border: 1px solid var(--border);
      background: transparent;
      font-size: 13px;
    }
    .btnLink:hover{
      background: color-mix(in srgb, var(--accent) 10%, transparent);
      text-decoration: none;
    }

    .tags{ color: var(--muted); font-size: 12px; }

    footer{
      margin-top: 18px; padding: 14px 4px;
      color: var(--muted); font-size: 13px;
      display:flex; justify-content: space-between; gap: 12px; flex-wrap: wrap;
    }

    /* A lista fonte (dados) fica escondida */
    ul#pdf-list{ display:none; }

    .empty{
      padding: 12px 18px 20px;
      color: var(--muted);
      font-size: 14px;
      display:none;
    }
  </style>
</head>

<body>
  <div class="wrap">
    <header>
      <div>
        <h1>Materiais em PDF</h1>
        <p class="subtitle">
          Documentos organizados por categoria. Usa a pesquisa e o filtro para encontrares rapidamente um tema.
        </p>
      </div>
      <div class="badge" title="Hospedado em GitHub Pages">
        <span style="display:inline-block;width:8px;height:8px;border-radius:999px;background:var(--accent);"></span>
        GitHub Pages
      </div>
    </header>

    <section class="panel controls" aria-label="Pesquisa e filtros">
      <div class="row">
        <div class="search">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M10.5 19a8.5 8.5 0 1 1 0-17 8.5 8.5 0 0 1 0 17Z" stroke="currentColor" stroke-width="2"/>
            <path d="M16.8 16.8 21 21" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
          <input id="q" type="search" placeholder="Pesquisar (ex.: globalização, PIB, externalidades)..." autocomplete="off" />
        </div>

        <div class="chips" aria-label="Filtro por categoria">
          <button class="chip" data-filter="__all" aria-pressed="true">Todas</button>
          <button class="chip" data-filter="Economia A 10º" aria-pressed="false">Econ A 10º</button>
          <button class="chip" data-filter="Economia A 11º" aria-pressed="false">Econ A 11º</button>
          <button class="chip" data-filter="Economia C 12º" aria-pressed="false">Econ C 12º</button>
          <button class="chip" data-filter="Profissionais" aria-pressed="false">Profissionais</button>
          <button class="chip" data-filter="Diversos" aria-pressed="false">Diversos</button>
        </div>
      </div>

      <div class="meta">
        <div>Total: <strong><span id="total">0</span></strong> documentos</div>
        <div>Filtro: <strong><span id="activeFilter">Todas</span></strong></div>
      </div>
    </section>

    <section class="panel" style="margin-top:14px;">
      <div id="sections"></div>
      <div class="empty" id="empty">Não encontrei resultados para a pesquisa/filtro atual.</div>
    </section>

    <footer>
      <div>© <span id="year"></span> — Miguel Rodrigues</div>
      <div><a href="https://github.com/miguelpalhoto/pdf-economia" target="_blank" rel="noopener">Ver repositório</a></div>
    </footer>

    <!--
      FONTE DE DADOS (adiciona PDFs aqui)
      Regras:
      - href: SEM barra inicial. Ex: "pdf/ficheiro.pdf"
      - data-cat: uma das categorias abaixo (exatamente igual):
          "Economia A 10º" | "Economia A 11º" | "Economia C 12º" | "Profissionais" | "Diversos"
      - data-tags / data-desc são opcionais (ajudam na pesquisa)
    -->
    <ul id="pdf-list">
      <li>
        <a href="pdf/Beamer_GLOBALIZACAO1.pdf"
           data-cat="Economia C 12º"
           data-title="Conteúdo do tema Globalização e regionalização económica"
           data-tags="globalização, regionalização, slides, beamer"
           data-desc="Slides/Beamer — síntese do tema, conceitos e exemplos.">
          Conteúdo do tema Globalização e regionalização económica
        </a>
      </li>

      <!-- EXEMPLOS (duplica depois):
      <li><a href="pdf/PIB_definicao.pdf" data-cat="Economia A 10º" data-title="PIB — Definição" data-tags="pib, bens e serviços" data-desc="Definição e exemplo simples.">PIB — Definição</a></li>
      <li><a href="pdf/mercado_trabalho.pdf" data-cat="Economia A 11º" data-title="Mercado de trabalho" data-tags="desemprego, salários" data-desc="Resumo + exercícios.">Mercado de trabalho</a></li>
      <li><a href="pdf/custos_fixos_variaveis.pdf" data-cat="Profissionais" data-title="Custos fixos e variáveis" data-tags="contabilidade analítica, pap" data-desc="Fichas de apoio.">Custos fixos e variáveis</a></li>
      <li><a href="pdf/outros.pdf" data-cat="Diversos" data-title="Notas diversas" data-tags="vários" data-desc="Materiais complementares.">Notas diversas</a></li>
      -->
    </ul>
  </div>

  <script>
    (function () {
      const CATS = [
        "Economia A 10º",
        "Economia A 11º",
        "Economia C 12º",
        "Profissionais",
        "Diversos"
      ];

      const year = document.getElementById("year");
      year.textContent = new Date().getFullYear();

      const q = document.getElementById("q");
      const sectionsRoot = document.getElementById("sections");
      const empty = document.getElementById("empty");
      const totalEl = document.getElementById("total");
      const activeFilterEl = document.getElementById("activeFilter");
      const chips = Array.from(document.querySelectorAll(".chip"));

      const items = Array.from(document.querySelectorAll("#pdf-list a")).map(a => ({
        href: a.getAttribute("href"),
        cat: (a.dataset.cat || "Diversos").trim(),
        title: (a.dataset.title || a.textContent.trim()).trim(),
        tags: (a.dataset.tags || "").trim(),
        desc: (a.dataset.desc || "").trim()
      }));

      function escapeHtml(str){
        return str.replace(/[&<>"']/g, m => ({
          "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"
        }[m]));
      }

      let activeCat = "__all";

      function setActiveChip(value){
        activeCat = value;
        chips.forEach(btn => {
          const pressed = btn.dataset.filter === value;
          btn.setAttribute("aria-pressed", pressed ? "true" : "false");
        });
        activeFilterEl.textContent = value === "__all" ? "Todas" : value;
        render();
      }

      chips.forEach(btn => btn.addEventListener("click", () => setActiveChip(btn.dataset.filter)));

      function matches(doc, term){
        if (!term) return true;
        const hay = (doc.title + " " + doc.tags + " " + doc.desc + " " + doc.cat).toLowerCase();
        return hay.includes(term);
      }

      function render(){
        const term = q.value.trim().toLowerCase();

        const filtered = items.filter(doc => {
          const catOk = (activeCat === "__all") || (doc.cat === activeCat);
          return catOk && matches(doc, term);
        });

        totalEl.textContent = filtered.length.toString();
        sectionsRoot.innerHTML = "";

        const byCat = new Map(CATS.map(c => [c, []]));
        filtered.forEach(doc => {
          if (!byCat.has(doc.cat)) byCat.set(doc.cat, []);
          byCat.get(doc.cat).push(doc);
        });

        let any = false;

        byCat.forEach((docs, cat) => {
          if (!docs.length) return;

          any = true;

          const section = document.createElement("div");
          section.className = "section";

          section.innerHTML = `
            <div class="sectionHead">
              <h2 class="sectionTitle">${escapeHtml(cat)}</h2>
              <div class="sectionCount">${docs.length} documento(s)</div>
            </div>
            <div class="grid">
              ${docs.map(d => `
                <div class="card">
                  <p class="docTitle">${escapeHtml(d.title)}</p>
                  ${d.desc ? `<p class="docDesc">${escapeHtml(d.desc)}</p>` : ""}
                  <div class="actions">
                    <a class="btnLink" href="${d.href}" target="_blank" rel="noopener">Abrir PDF ↗</a>
                    <a class="btnLink" href="${d.href}" download>Download</a>
                  </div>
                  ${d.tags ? `<div class="tags">${escapeHtml(d.tags)}</div>` : ""}
                </div>
              `).join("")}
            </div>
          `;

          sectionsRoot.appendChild(section);
        });

        empty.style.display = any ? "none" : "block";
      }

      q.addEventListener("input", render);
      render();
    })();
  </script>
</body>
</html>
