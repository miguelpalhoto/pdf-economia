<!doctype html>
<html lang="pt">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="light dark" />
  <title>Materiais em PDF</title>

  <style>
    :root{
      --bg: #0b1020;
      --panel: rgba(255,255,255,.06);
      --panel-2: rgba(255,255,255,.10);
      --text: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.68);
      --border: rgba(255,255,255,.14);
      --shadow: 0 20px 60px rgba(0,0,0,.45);
      --radius: 18px;
      --radius-sm: 14px;
      --pad: 22px;
      --max: 980px;
      --accent: #8bd3ff;
      --accent-2: #b8f7d4;
    }

    @media (prefers-color-scheme: light){
      :root{
        --bg: #f6f7fb;
        --panel: rgba(0,0,0,.04);
        --panel-2: rgba(0,0,0,.06);
        --text: rgba(0,0,0,.88);
        --muted: rgba(0,0,0,.60);
        --border: rgba(0,0,0,.10);
        --shadow: 0 18px 40px rgba(0,0,0,.12);
        --accent: #0066ff;
        --accent-2: #0a8f5a;
      }
    }

    *{ box-sizing: border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      color: var(--text);
      background:
        radial-gradient(1200px 600px at 10% -10%, rgba(139,211,255,.28), transparent 60%),
        radial-gradient(900px 600px at 90% 0%, rgba(184,247,212,.22), transparent 55%),
        radial-gradient(900px 700px at 50% 120%, rgba(139,211,255,.10), transparent 60%),
        var(--bg);
      line-height: 1.45;
    }

    a{ color: inherit; text-decoration: none; }
    a:hover{ text-decoration: underline; text-underline-offset: 3px; }

    .wrap{
      max-width: var(--max);
      margin: 0 auto;
      padding: 34px 18px 56px;
    }

    header{
      display:flex;
      gap: 18px;
      align-items: flex-start;
      justify-content: space-between;
      margin-bottom: 18px;
    }

    .title{
      display:flex;
      flex-direction: column;
      gap: 8px;
    }

    h1{
      margin:0;
      font-size: clamp(26px, 3.2vw, 38px);
      letter-spacing: -0.02em;
    }

    .subtitle{
      margin:0;
      color: var(--muted);
      font-size: 15px;
      max-width: 68ch;
    }

    .badge{
      display:inline-flex;
      align-items:center;
      gap: 8px;
      padding: 8px 12px;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: var(--panel);
      color: var(--muted);
      font-size: 13px;
      white-space: nowrap;
      user-select: none;
    }

    .panel{
      border: 1px solid var(--border);
      background: var(--panel);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
    }

    .controls{
      padding: var(--pad);
      display:grid;
      gap: 14px;
    }

    .searchRow{
      display:flex;
      gap: 12px;
      flex-wrap: wrap;
      align-items:center;
      justify-content: space-between;
    }

    .search{
      flex: 1 1 360px;
      position: relative;
    }

    .search input{
      width: 100%;
      padding: 12px 14px 12px 42px;
      border-radius: 14px;
      border: 1px solid var(--border);
      background: rgba(255,255,255,.06);
      color: var(--text);
      outline: none;
      font-size: 15px;
    }
    @media (prefers-color-scheme: light){
      .search input{ background: rgba(255,255,255,.65); }
    }
    .search input:focus{
      border-color: color-mix(in srgb, var(--accent) 55%, var(--border));
      box-shadow: 0 0 0 4px color-mix(in srgb, var(--accent) 18%, transparent);
    }

    .search svg{
      position:absolute;
      left: 13px;
      top: 50%;
      transform: translateY(-50%);
      opacity: .65;
    }

    .metaRow{
      display:flex;
      gap: 10px;
      flex-wrap: wrap;
      align-items:center;
      justify-content: space-between;
      color: var(--muted);
      font-size: 13px;
    }

    .btn{
      display:inline-flex;
      align-items:center;
      gap: 8px;
      padding: 10px 12px;
      border-radius: 14px;
      border: 1px solid var(--border);
      background: var(--panel-2);
      color: var(--text);
      cursor: pointer;
      font-size: 14px;
      user-select: none;
    }
    .btn:hover{ filter: brightness(1.05); }
    .btn:active{ transform: translateY(1px); }

    .grid{
      padding: var(--pad);
      display:grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 14px;
    }
    @media (max-width: 720px){
      .grid{ grid-template-columns: 1fr; }
      header{ flex-direction: column; align-items: stretch; }
      .badge{ align-self: flex-start; }
    }

    .card{
      border: 1px solid var(--border);
      background: rgba(255,255,255,.04);
      border-radius: var(--radius-sm);
      padding: 16px 16px 14px;
      display:flex;
      flex-direction: column;
      gap: 10px;
      transition: transform .12s ease, filter .12s ease, background .12s ease;
    }
    @media (prefers-color-scheme: light){
      .card{ background: rgba(255,255,255,.72); }
    }
    .card:hover{
      transform: translateY(-2px);
      background: rgba(255,255,255,.06);
    }
    @media (prefers-color-scheme: light){
      .card:hover{ background: rgba(255,255,255,.86); }
    }

    .cardTop{
      display:flex;
      gap: 12px;
      align-items:flex-start;
      justify-content: space-between;
    }

    .docTitle{
      margin:0;
      font-size: 16px;
      letter-spacing: -0.01em;
    }

    .pill{
      display:inline-flex;
      align-items:center;
      gap: 6px;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid var(--border);
      color: var(--muted);
      font-size: 12px;
      white-space: nowrap;
    }

    .cardDesc{
      margin:0;
      color: var(--muted);
      font-size: 13px;
    }

    .actions{
      display:flex;
      gap: 10px;
      flex-wrap: wrap;
      margin-top: 2px;
    }

    .link{
      display:inline-flex;
      align-items:center;
      gap: 8px;
      padding: 9px 10px;
      border-radius: 12px;
      border: 1px solid var(--border);
      background: transparent;
      font-size: 13px;
      color: var(--text);
    }
    .link:hover{
      background: color-mix(in srgb, var(--accent) 10%, transparent);
      text-decoration: none;
    }

    footer{
      margin-top: 18px;
      padding: 14px 4px;
      color: var(--muted);
      font-size: 13px;
      display:flex;
      justify-content: space-between;
      gap: 12px;
      flex-wrap: wrap;
    }

    /* Escondemos a lista "original" (fonte de dados), mas mantemos no HTML */
    ul#pdf-list{ display:none; }
    .empty{
      padding: 10px 2px 2px;
      color: var(--muted);
      font-size: 14px;
    }
  </style>
</head>

<body>
  <div class="wrap">
    <header>
      <div class="title">
        <h1>Materiais em PDF</h1>
        <p class="subtitle">Coleção de documentos (slides, fichas e apontamentos). Usa a pesquisa para encontrares rapidamente um tema.</p>
      </div>
      <div class="badge" title="Hospedado em GitHub Pages">
        <span style="display:inline-block;width:8px;height:8px;border-radius:999px;background:var(--accent);"></span>
        GitHub Pages
      </div>
    </header>

    <section class="panel controls" aria-label="Pesquisa e ações">
      <div class="searchRow">
        <div class="search">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M10.5 19a8.5 8.5 0 1 1 0-17 8.5 8.5 0 0 1 0 17Z" stroke="currentColor" stroke-width="2"/>
            <path d="M16.8 16.8 21 21" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
          <input id="q" type="search" placeholder="Pesquisar (ex.: globalização, PIB, externalidades)..." autocomplete="off" />
        </div>

        <button class="btn" id="openAll" type="button" title="Abrir todos os PDFs filtrados em separadores">
          <span aria-hidden="true">↗</span> Abrir filtrados
        </button>
      </div>

      <div class="metaRow">
        <div><span id="count">0</span> documentos</div>
        <div>Dica: escreve “globalização” ou “regionalização”</div>
      </div>
    </section>

    <section class="panel" style="margin-top:14px;">
      <div class="grid" id="cards" aria-label="Lista de documentos"></div>
      <div class="empty" id="empty" style="display:none; padding: 0 22px 22px;">
        Não encontrei resultados para essa pesquisa.
      </div>
    </section>

    <footer>
      <div>© <span id="year"></span> — Miguel Rodrigues</div>
      <div>
        <a href="https://github.com/miguelpalhoto/pdf-economia" target="_blank" rel="noopener">Ver repositório</a>
      </div>
    </footer>

    <!--
      FONTE DE DADOS: adiciona aqui os teus PDFs.
      - href tem de ser RELATIVO: "pdf/ficheiro.pdf" (sem / no início)
      - data-tags e data-desc são opcionais (ajudam na pesquisa e layout)
    -->
    <ul id="pdf-list">
      <li>
        <a href="pdf/Beamer_GLOBALIZACAO1.pdf"
           data-title="Conteúdo do tema Globalização e regionalização económica"
           data-tags="economia c, 12º, globalização, regionalização, slides"
           data-desc="Slides/Beamer — síntese do tema, conceitos e exemplos.">
          Conteúdo do tema Globalização e regionalização económica
        </a>
      </li>

      <!-- EXEMPLOS: duplica e altera
      <li><a href="pdf/PIB_definicao.pdf" data-title="PIB — Definição" data-tags="economia a, 10º, pib" data-desc="Apontamentos curtos com definição e exemplo.">PIB — Definição</a></li>
      <li><a href="pdf/Externalidades.pdf" data-title="Externalidades" data-tags="economia c, 12º, externalidades" data-desc="Fichas e exercícios com soluções.">Externalidades</a></li>
      -->
    </ul>
  </div>

  <script>
    (function () {
      const year = document.getElementById("year");
      year.textContent = new Date().getFullYear();

      const q = document.getElementById("q");
      const cards = document.getElementById("cards");
      const empty = document.getElementById("empty");
      const count = document.getElementById("count");
      const openAll = document.getElementById("openAll");

      const items = Array.from(document.querySelectorAll("#pdf-list a")).map(a => ({
        href: a.getAttribute("href"),
        title: a.dataset.title || a.textContent.trim(),
        tags: (a.dataset.tags || "").trim(),
        desc: (a.dataset.desc || "").trim()
      }));

      function icon() {
        return `
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M7 3h7l3 3v15a3 3 0 0 1-3 3H7a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3Z" stroke="currentColor" stroke-width="2" />
            <path d="M14 3v4a1 1 0 0 0 1 1h4" stroke="currentColor" stroke-width="2" />
          </svg>
        `;
      }

      function escapeHtml(str){
        return str.replace(/[&<>"']/g, m => ({
          "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"
        }[m]));
      }

      function render(list) {
        cards.innerHTML = "";
        count.textContent = list.length.toString();
        empty.style.display = list.length ? "none" : "block";

        const frag = document.createDocumentFragment();

        list.forEach(doc => {
          const tagText = doc.tags ? doc.tags.split(",")[0].trim() : "PDF";
          const el = document.createElement("div");
          el.className = "card";
          el.innerHTML = `
            <div class="cardTop">
              <div style="display:flex; gap:10px; align-items:flex-start;">
                <div style="opacity:.9">${icon()}</div>
                <div>
                  <p class="docTitle">${escapeHtml(doc.title)}</p>
                  ${doc.desc ? `<p class="cardDesc">${escapeHtml(doc.desc)}</p>` : ""}
                </div>
              </div>
              <span class="pill">${escapeHtml(tagText || "PDF")}</span>
            </div>

            <div class="actions">
              <a class="link" href="${doc.href}" target="_blank" rel="noopener">
                Abrir PDF <span aria-hidden="true">↗</span>
              </a>
              <a class="link" href="${doc.href}" download>
                Download
              </a>
            </div>

            ${doc.tags ? `<div style="color:var(--muted); font-size:12px;">${escapeHtml(doc.tags)}</div>` : ""}
          `;
          frag.appendChild(el);
        });

        cards.appendChild(frag);
      }

      function filter() {
        const term = q.value.trim().toLowerCase();
        if (!term) return render(items);

        const filtered = items.filter(d => {
          const hay = (d.title + " " + d.tags + " " + d.desc).toLowerCase();
          return hay.includes(term);
        });
        render(filtered);
      }

      openAll.addEventListener("click", () => {
        const term = q.value.trim().toLowerCase();
        const list = !term ? items : items.filter(d => (d.title + " " + d.tags + " " + d.desc).toLowerCase().includes(term));
        // abre no máximo 12 para não ser abusivo
        list.slice(0, 12).forEach(d => window.open(d.href, "_blank", "noopener"));
      });

      q.addEventListener("input", filter);

      // Render inicial
      render(items);
    })();
  </script>
</body>
</html>
